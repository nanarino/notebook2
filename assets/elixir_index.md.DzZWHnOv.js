import{_ as i,c as a,o as e,ae as l}from"./chunks/framework.BjmSbrnh.js";const E=JSON.parse('{"title":"安裝 ErlangVM 和 Elixir","description":"","frontmatter":{},"headers":[],"relativePath":"elixir/index.md","filePath":"elixir/index.md","lastUpdated":1649301010000}'),h={name:"elixir/index.md"};function n(t,s,p,k,r,d){return e(),a("div",null,s[0]||(s[0]=[l(`<h1 id="安裝-erlangvm-和-elixir" tabindex="-1">安裝 ErlangVM 和 Elixir <a class="header-anchor" href="#安裝-erlangvm-和-elixir" aria-label="Permalink to &quot;安裝 ErlangVM 和 Elixir&quot;">​</a></h1><h2 id="windows" tabindex="-1">Windows <a class="header-anchor" href="#windows" aria-label="Permalink to &quot;Windows&quot;">​</a></h2><p>需要以管理員身份運行命令來安装：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">choco</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> elixir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span></code></pre></div><p>或者更新：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">choco</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> upgrade</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> elixir</span></span></code></pre></div><p>更新 elixir 时會連带更新 erlang</p><p>安装或更新後會提示：</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">------------------------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NOTE:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">The Elixir commands have been installed to:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">C:\\ProgramData\\chocolatey\\lib\\Elixir\\tools\\bin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Please add this directory to your PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">then your shell session to access these commands:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">elixir</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">elixirc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mix</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iex</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">------------------------------------------------------------------------</span></span></code></pre></div><p>erlang 的環境變量已经自动設置，但是 elixir 還需要按照上面提示的路徑<strong>手动</strong>設置：</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$elixirPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;C:\\ProgramData\\chocolatey\\lib\\Elixir\\tools\\bin&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">env:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">System.Environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]::GetEnvironmentVariable(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PATH&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Machine&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">env:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$elixirPath</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">System.Environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]::SetEnvironmentVariable(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PATH&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">env:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Machine&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="安裝包" tabindex="-1">安裝包 <a class="header-anchor" href="#安裝包" aria-label="Permalink to &quot;安裝包&quot;">​</a></h3><p>安裝包安裝也是可以的：</p><ul><li><a href="https://erlang.org/download/" target="_blank" rel="noreferrer">erlang</a></li><li><a href="https://github.com/elixir-lang/elixir/releases" target="_blank" rel="noreferrer">elixir</a></li></ul><p>elixir 依然需要設置環境變量</p><h2 id="验证安装成功" tabindex="-1">验证安装成功 <a class="header-anchor" href="#验证安装成功" aria-label="Permalink to &quot;验证安装成功&quot;">​</a></h2><p>使用命令直接顯示版本</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PS C:\\Users\\Administrator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> elixir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">v</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Erlang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OTP </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">26</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">erts-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">14.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">64</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-bit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">smp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async-threads</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">jit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Elixir </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (compiled with Erlang</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">OTP </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">26</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>在 cmd 中使用 <code>iex</code> 可以進入交互式環境，powershell 里不可以進，因為 iex 是 powershell 的内置命令。</p><p>在 iex 中使用 <code>clear</code> 回车可以清空输入</p><h2 id="運行-helloworld-脚本" tabindex="-1">運行 helloworld 脚本 <a class="header-anchor" href="#運行-helloworld-脚本" aria-label="Permalink to &quot;運行 helloworld 脚本&quot;">​</a></h2><p>創建 helloworld.exs 文件，在 vscode 中透過 codeRunner 插件運行 或 <code>elixir ./helloworld.exs</code>，</p><div class="language-elixir vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">elixir</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world!&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">puts</span></span></code></pre></div><p>vscode 會自己提示需要安装的插件，但是 LSP 頻繁從 GITHUB 拉取，在中国大陆難用</p><h2 id="使用-mix-創建專案" tabindex="-1">使用 mix 創建專案 <a class="header-anchor" href="#使用-mix-創建專案" aria-label="Permalink to &quot;使用 mix 創建專案&quot;">​</a></h2><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mix </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">help</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title"><code>size_object: matchstate term not allowed</code></p><p>mix 發佈了使用不匹配的 erlang/OTP 版本所編譯而导致 降低 elixir 到上一個中版本即可 比如 1.17.x 會报错 在 GitHub 上查詢到 1.16 的最後一個版本後安装： <code>choco install elixir --allow-downgrade -version 1.16.3</code></p></div><h3 id="初始化空專案" tabindex="-1">初始化空專案 <a class="header-anchor" href="#初始化空專案" aria-label="Permalink to &quot;初始化空專案&quot;">​</a></h3><p>使用 <code>mix new MyProject</code> 命令創建新的專案，里面有一些樣板程式碼</p><p>進入生成的專案根目錄後 使用 <code>iex -S mix</code> 進入交互式環境，且自动导入了專案的主函數（java 專案是一個主類，elixir 的專案是一個函數）</p><p>在 iex 中使用 <code>recompile</code> 回车可以重新編譯專案</p><p>在 iex 中使用 <code>c</code> 可以編譯某個 ex 文件</p><h3 id="依赖管理" tabindex="-1">依赖管理 <a class="header-anchor" href="#依赖管理" aria-label="Permalink to &quot;依赖管理&quot;">​</a></h3><p>使用 hex 來管理套件</p><p>使用 <code>mix local.hex --force</code> 命令安装或尝试升级它</p><p>使用 <code>mix compile</code> 編譯專案</p><p>使用 <code>mix deps.get</code> 安装專案依赖</p><p>使用 <code>mix deps.compile</code> 編譯專案依赖</p><p>使用 <code>mix format</code> 格式化專案程式碼</p><p>使用 <code>mix test</code> 運行所有_test 结尾的 .exs 文件里的测试用例</p><h3 id="使用目標框架的脚手架創建空專案" tabindex="-1">使用目標框架的脚手架創建空專案 <a class="header-anchor" href="#使用目標框架的脚手架創建空專案" aria-label="Permalink to &quot;使用目標框架的脚手架創建空專案&quot;">​</a></h3><p>hex 安装好是前提。</p><p>使用 <code>mix archive.install hex Framework_new</code> 安装需要的脚手架</p><p>使用 <code>mix Framework.new MyProject</code> 命令創建新的目標框架專案，里面有目標框架的樣板結構和程式碼</p><h3 id="設置镜像" tabindex="-1">設置镜像 <a class="header-anchor" href="#設置镜像" aria-label="Permalink to &quot;設置镜像&quot;">​</a></h3><p>默認的 <a href="https://repo.hex.pm" target="_blank" rel="noreferrer">hex</a> 的 S3 伺服器在中国大陆稍逊</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mix hex.repo set hexpm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">url https:</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">//</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hexpm.upyun.com</span></span></code></pre></div><h3 id="vscode" tabindex="-1">vscode <a class="header-anchor" href="#vscode" aria-label="Permalink to &quot;vscode&quot;">​</a></h3><p>有的版本會不适用 ElixirLS（語言伺服器）需要降低或提高版本：</p><blockquote><p>Erlang OTP 26.0 and 26.1 have critical bugs on Windows. Please make sure OTP 26.2 or greater is installed</p></blockquote>`,50)]))}const c=i(h,[["render",n]]);export{E as __pageData,c as default};
